IF object_id(N'[dbo].[FK_dbo.CustomerReserves_dbo.BusinessItems_BusinessItemsId]', N'F') IS NOT NULL
    ALTER TABLE [dbo].[CustomerReserves] DROP CONSTRAINT [FK_dbo.CustomerReserves_dbo.BusinessItems_BusinessItemsId]
IF object_id(N'[dbo].[FK_dbo.BusinessItems_dbo.StaffDetails_StaffId]', N'F') IS NOT NULL
    ALTER TABLE [dbo].[BusinessItems] DROP CONSTRAINT [FK_dbo.BusinessItems_dbo.StaffDetails_StaffId]
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_StaffId' AND object_id = object_id(N'[dbo].[BusinessItems]', N'U'))
    DROP INDEX [IX_StaffId] ON [dbo].[BusinessItems]
IF EXISTS (SELECT name FROM sys.indexes WHERE name = N'IX_BusinessItemsId' AND object_id = object_id(N'[dbo].[CustomerReserves]', N'U'))
    DROP INDEX [IX_BusinessItemsId] ON [dbo].[CustomerReserves]
CREATE TABLE [dbo].[StaffBusinessItems] (
    [Id] [int] NOT NULL IDENTITY,
    [BusinessItemsId] [int],
    [StoreId] [int],
    [StaffId] [int],
    CONSTRAINT [PK_dbo.StaffBusinessItems] PRIMARY KEY ([Id])
)
CREATE INDEX [IX_BusinessItemsId] ON [dbo].[StaffBusinessItems]([BusinessItemsId])
CREATE INDEX [IX_StoreId] ON [dbo].[StaffBusinessItems]([StoreId])
CREATE INDEX [IX_StaffId] ON [dbo].[StaffBusinessItems]([StaffId])
ALTER TABLE [dbo].[CustomerReserves] ADD [StaffBusinessItemsId] [int]
CREATE INDEX [IX_StaffBusinessItemsId] ON [dbo].[CustomerReserves]([StaffBusinessItemsId])
ALTER TABLE [dbo].[CustomerReserves] ADD CONSTRAINT [FK_dbo.CustomerReserves_dbo.StaffBusinessItems_StaffBusinessItemsId] FOREIGN KEY ([StaffBusinessItemsId]) REFERENCES [dbo].[StaffBusinessItems] ([Id])
DECLARE @var0 nvarchar(128)
SELECT @var0 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.BusinessItems')
AND col_name(parent_object_id, parent_column_id) = 'BusinessItem';
IF @var0 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[BusinessItems] DROP CONSTRAINT [' + @var0 + ']')
ALTER TABLE [dbo].[BusinessItems] DROP COLUMN [BusinessItem]
DECLARE @var1 nvarchar(128)
SELECT @var1 = name
FROM sys.default_constraints
WHERE parent_object_id = object_id(N'dbo.CustomerReserves')
AND col_name(parent_object_id, parent_column_id) = 'BusinessItemsId';
IF @var1 IS NOT NULL
    EXECUTE('ALTER TABLE [dbo].[CustomerReserves] DROP CONSTRAINT [' + @var1 + ']')
ALTER TABLE [dbo].[CustomerReserves] DROP COLUMN [BusinessItemsId]
ALTER TABLE [dbo].[StaffBusinessItems] ADD CONSTRAINT [FK_dbo.StaffBusinessItems_dbo.BusinessItems_BusinessItemsId] FOREIGN KEY ([BusinessItemsId]) REFERENCES [dbo].[BusinessItems] ([Id])
ALTER TABLE [dbo].[StaffBusinessItems] ADD CONSTRAINT [FK_dbo.StaffBusinessItems_dbo.StaffDetails_StaffId] FOREIGN KEY ([StaffId]) REFERENCES [dbo].[StaffDetails] ([Id])
ALTER TABLE [dbo].[StaffBusinessItems] ADD CONSTRAINT [FK_dbo.StaffBusinessItems_dbo.StoreDetails_StoreId] FOREIGN KEY ([StoreId]) REFERENCES [dbo].[StoreDetails] ([Id])
INSERT [dbo].[__MigrationHistory]([MigrationId], [ContextKey], [Model], [ProductVersion])
VALUES (N'202211270421006_createStaffBusinessItemsAndConnect', N'BonnieYork.Migrations.Configuration',  0x1F8B0800000000000400ED1DDB6EE3BAF1BD40FFC1F0535BEC89932C0ED006CE39C83ABB6DDAB39B20DE3D6D9F02D9621261757125799BA0E897F5A19FD45F2865C912EF1C52D4C539415E62919C2187C3E17066C8F9DF7FFE3BFFF1290A27DF509A05497C3E3D393A9E4E50BC4EFC207E389F6EF3FBEF7E3FFDF1875FFF6AFEDE8F9E263FEFEBBD2DEAE19671763E7DCCF3CDD96C96AD1F51E4654751B04E932CB9CF8FD64934F3FC64767A7CFC87D9C9C90C6110530C6B3299DF6EE33C88D0EE07FEB948E235DAE45B2FFC98F828CCAAEFB864B9833AF9E44528DB786B743E7D97C47180FE9EA45F8FCACAD3C9451878B8234B14DE4F275E1C27B997E36E9E7DC9D0324F93F861B9C11FBCF0F3F306E17AF75E98A1AAFB674D75E8488E4F8B91CC9A867B50EB6D96279121C093B71569666C732B024F6BD261E2BDC744CE9F8B51EF088869B7CD821865D9557C9FA4518585C57BB608D3A28D80D44702006F264DB537358760462AFEDE4C16DB30DFA6E83C46DB3CF5C237939BED2A0CD67F41CF9F93AF283E8FB76148761A771B97511FF0A79B34D9A0347FBE45F7D550AEFCE96446B79BB10DEB66449B72645771FEF6743AF984917BAB10D53C415061992729FA238A51EAE5C8BFF1F21CA5710103EDA8CA616770ED9A7308D56D3EE325812BA2F49B17EE1B6206C64B713AF9E83DFD84E287FCF17CFA3D5E7B1F8227E4EF3F549DFF120778E1E23679BA453A5C7F45E8ABEF3D2F732FCD0BBC3DE17B1FFB3D627B9722EF6B1FF8FE9484419FD4ACF0F544CD0A5B6FD42C4544855581ECD40AD927EF5BF0B05BE3A2257B89722FC0ABEF1685BB3AD963B029B79623A2FC4E28493FA449749B84342851D5BBCF5EFA80723CB404567F996CD3353394F9AC91EF4AA94F8DCB44DA130D5FA5BC5CCA17FFB65F125C2FD598AF621FCF64FA6CB8C52C7683EAB9AF9701EE69B0CE7B477CE1FB295E49BDE35DA030DC3C2631FAB48D562855E03FF9BE0BFC372E71EB5680777FFF39C843D512B013D42C17A16C9D069B52D44A51E17F1DE07A8745044AB13878EC1CD5077CAA5925C9D79F82F86BE7C8AEE22CF71E522FEA051B4682BA4124DDC385FB72B77BF97E6F86EEE5FBBDDF7848398A32E160A81A77D476DF0C435A895346E435456A88AAEB8B9DB281D25B94E1430D12769EA923EBBEA21A3700555DBB21ECA41C4517F5A0F8FAB271A96B0A14456575D3D1EDB508E120F685B2AE8BCAB90E0B2B997673376AA5665E972BE9CC5711135850AF9506CE2C612B8B4BD1F4550B17E2B2B1B5ECE659DF490D900DD29EC04F9C9C88B1FADC399252C15AA9F0B8D10B6E51E4A5DDAB1F37F8C8819743375A5CF71B062334945B06FD0BB069305B88B13C565B4A5A2A24AC46A5DF1E2DED222C594CCD236CFB57F92CC445D1C8584EBB92EDEEF46DA78B953F3E005777B74A38BF3454BA38D765BD4ACEEBB11D2A8500A12C5615B50D950AA4BEB56BC9EBECE001604B678298E3501329CC347E15C1FD8A5189B0B141D5669BA866FF1213A707F575874BA3F78F5B55D6EE160A194357B9E3562FBF51886B4A37094975AB0D42BF9B3BDFFB58D169B05D76B7F701773A937DADBB5DCC814D503F098E372F1B072BDDF675EB526E2917EB75B28DF3B6369B3DB841BCB670C72054AE1B76E05D90E68F97CAA80ABB100EED86524DDF472FF61E8A912B963D5DF58E5D61BC005036906E33EA565DFA3A5AEF9C32E9A691E5AD041C3B8136828E86F12AF084B82A2229CDBD9D48A71B2FCBFE99A47E0F985DE89F8EC5846C4DC1848BBD05D22E32AB6EF8BA8884B8C4075E53FF4E01C491DEB19B328DD2018C9331C4FCE764D54B804EA7FE166B45CAC9D0F094A789BF5DF7127CF41A11D485FEA9F5BEB53B2E0BEDA506EA58472EC5EEEDDFFA8143ACE746868F3A325C36EAAAC21DB5BF320314D411DB3C4415AD0C1E801390A09E7C10CAAAE2107345FD4E3C117631392A9672EBFDAD39C958F9AA5ABE6A5F425C36AE837296BDE7ECFAFEBEC7FD01644AB51528424E56491EFB0B1E6D8EE70200AF8C2DC4F54B389B3398BF64853B6F4F9EB62168D68601FD3A75B6750A23BA015BADD5E26D42704D56ECBED5EB3215E3AAC8D38F91DF5A47B28AB066B95319860D61C98B2C4BD6C1AE6F7CBF85B723E8E1BF8FFD89E155897242988B18786A30BB061BCCA0B897E7D3E3A3A3138ED67064B502DC2013DEF4A091FE8EC388B91EA505DB79E102CF1E5E47419CF34B2488D7C1C60BCD28C18001AEB5622A6B846CC9252A8292717FCDC804E9496D53E3BB53636584828E78F319C17D3AA6D444DDC919051A8247B2251F04A06314038C2ADE1421132E054BC68475AD17CE84CD0BA42B5CECD0202C0AF34CC8B8C6D04DD1B08ECC4347F3D0094BC8F9757C894294A3C9C5BA7CAF64E1656BCFE73738BC71F8ED7A2D6078D65FD3891C36A2690F3C6F442D487F04D11183B2BEC48AAAE31E9D5515CA361A9D011A90C6A3ABEDA49DB2A99A0C3DF2A79A40268C3938472AE2FA746C0209F26BC12A460805BCA95752DCE90DF01EF6C8A5FAF981A9B5A2E0E3E1745C43110AF24A314C6379E002448BF62D3901A3EF4B956D2F336BB3F948984FE530847309C87BD80D83822EEEB43BF539E25A009106E16300050F84B3453E1C2527291D3A0CD3D48E44432381D20B6DBF26EC9952D1A1BEF84F41F7436035B51B4269CD84F82418D3E920677E70EC0188835D9A5CF514ECCBE4AA270FD8E43AF4D95E16CA01D987859E0B4BB6D06310329ED4C1E07475B4D60304E3E879C717CCD5F8DD02AABB62F0E3B692499D1EEC6D99B5CBA3FC108C079883F1339FE6BABD817F0822275DFAA3C6C088B06E0DE3893A487634E7442326B4E6BFF1B1DE18B8EE05309C308045C605EA689686019A882823EB8FFA3942107F393A89A806DA035FA90801424F3C2DDD0357954149B80DEE678CD2BD28ABC3DA2E5745197ACA0511725F325405C96555B016CB1D05EC25CA5901490600355151AA30218EEF68C814577110A9520D2446CACA7B57966BFBC52B0E82EEF1953470399D9803CAD50042941291AD0084C75A48A470D98A10CA2A669C288540AA2D8862507531840FB54316D6D2406EC43207AE296260104B5EB854C46F2F13ADF8F5A30F48E44D558090C47AB4CC52E604A0790022011A22596634D14004D544C609296A124DA73B4D887DE3144D7512C60C858AB642F9654E55E035739EB4165160429B012C0E8CA0004C9059E012505B238CEDC92DBB8629A733C45F2E1CB4C6690E1EAD09700529651BA53D2D554F5AC9E9090D98D118BAA42133F0A19B62101017A0DA580A5C38A382A33AA4366E008B2A140E30D85E98D3F05E32849CE038050D2520910A4E480E894BE8858985171B2524D73AD0CD5CE8ECF8241AAE99CF1C363B56D4D25C2F9328AD5057B0953398555A0D367EA80BB743824AEE87AB17BCD4D064E4816CB988451626D801C2C966AE2416D81F66EC1173B66FF7483C8D8306763032E039BD3DDDE9A1A8575A1A91D1868246C483D36D4092892F78F2D4D2DBD1E19674623032BB0CDC6EDE9A32FB4BA7B57DB72E9BCFCAE4CED587F94C92057AFED1DB6C82F881C80A5D7D992CCB94D08BEF96E6C992A312C66C4D9D6A586B748D090F1EEF914C29468D7BFA2148B3FCD2CBBD95575C0E5EF811574D64CD9658DBF618E5066B7E2AF7E6B87DDBE27FD68CAE48E12CF00A54903EE0414785676137F91A4316076552E4EFF6422F15DC045F24E1368AE5FE0E79EBDAE3458290BAC1E470E86CCB2430BA040E91CFA94C42E54B8D21D7F97E0570EB3263A8445E5F015CA2140E99CF874C42E64B8D210B29C19619439550822F8543667219936099221EE67CC62C43CE19C72D7D462CB352052473D47B9089AC514002C81865EB0E654BF96804275DCACF7058A41B95EA91C2BD2A875626EE25E12C04EF60A8203459784928CD5738A43AAD2E09A8FE683026F611476A786CA1C19A93C1BCB183B753BCAB273469B668BE1BCC0399C7969A0AB2000E8FCC554B8223BFC3A1D18F4F92F0E812937590912F4CD24B812A82C36CDE9124C1355F47234B75E6732BCD4D04CB446713B71FB7B656DFEAE016A0219C26652305A9F96C2067CAAC8C9484293F994A83151289829511A47DAA1812CEFE9BC198C8477CA9919105A3595F201F9599CAA20308D25CF440BA596EDC35666A47D0DD7196C31D6A190FC4567A2F9D094F69A001184A0BE19721BCC93725285D51F1D684A657CA05037B19408E81CA4A46CB65A2C0181EBF7D51055D6D1903AF4527275235308395D8EFB954F0CA8F88FF151705F5B0F9632F5D32FCB9AE495E44ED6AF5D7D1B12CE38F75C3BA6AA0062CAC03D40D2BD72FE852C683FD470345B57E1097D252EBAFA36106B5CBDF58376D614E53B41EBBFE40DF82E6C05909BE1D4144C6BEFA331C5693638504D57CEDFE00D6B730A653A2D0561DB2E4D5F434A4DCD97B171C081E0928A8E49136EF4AF438B217EDA4E63E2B0107AC2E19D1B4F381600EBC38ADB50E109497A672C820D16FEA93D0E892D170551D49D28E95646000FC236FDA0DD3D04FC88B1C78321DA1D329E2E269D82A35F6EA4BFDBB8EA7A96259A8209B1D158A9099DDE8B32AAE860D6E29AB4C279854DF02BF086C593E67398A8E8A0A47CB7F848B3040C59ADA57C00B3DB847595E661B989E1E9F9C4E271761E06565E05315B673C65EEC04C5F19CBC2DE278901FCDD8E6E6D14005942CF329CD98CFD5A07F0BBF87EC094141E0A52E3F824DA643060777DB16333E7A3A9FFE6BD7E66C72F5B7BBAAD99BC9758A67FB6C723CF937891A92128E0EB629D1C7DFBC74FDE8A55CB20633D07CC44D17E0EB70932E801331274EC1F321385D80EF86347C388E53F04C588E02F6A906B6590227E1EB09072D4FCA0D123C3920C064F48C99AC6A5AB6115765D48DDB313531386EE1D621396EC14A72AF0AC19F7C6F9EE9CA0A3464EEC8789D16CB5A308164E40E0DF93791F7F45B537864E88E0370A284B2AD000A93C6B682C8268635000696B2AAB7DF0F5ACE0EA2B7D5B61402B369E79BA01BD53A37DFC1CB201CA7309B881C07DCBEF7B13A002548BADDC5DAD145B41CEC02E2BCFB660B8969DE6E418D69298330EF9AC13183B94D9DFAE05059EDE54FB04057242273CC90372D5B8FBCE51A17C168D3272AF8C7C96E4204FF0CB93B19AFEF1775E41504E1D8717C0D40C66446DDE9E210AE390172AC02DB89EB389E16E61C63165479A40E9615992CD51215D87CDED924D49680CDB4CE172524BAD101E0A8AD8513DDBA6547EA001BB0150604B809B7716ADD6977C46A673F33EF2D1D7DF36A3D727A021606B11CB0301AEA5840C7CE7439699AA093839DBB916FF13C603AB0056C9B6BA33E8843460E76CAE9B893361ABD8C82927456D08777C56FE3B67ADC5FF08A0FF9742E015958DE5DA229691836849526566902940FB6F068A571D643654681E5DE65DE7512CD3038D3ADEAEDAC61123FEA6E963AE71ED07D561EEB38D2E15ABCA4AC7DDB5898D969902C7AECA3C2827E759AA6027CA1C839536A6FE1F1180157DC0E27CFBDFB84F6F5438C02C07DA6AE1F2073D88BCF46DF7AEF1A3D0F596E5203F011EC46F821E48A7794737B24CC336EE923BD77749879DD5DA66B1F814EDE3303590ABB11F090710675F7ECC284655B24603F181691DFB71C1F73183C74AF7E837E3409CE8DB9B7BB2CE63DA7817EC979C98D8D922F93BF7A9664A67C35A2435A274C75002A75AF4C62A7528FCCBA3D0CAF8C4787EE5FACD8E8D04332CD18F8C5D2BB72985C72680C62954DDB45EA6C0B3E739C2ABB1FA161C87D63C883CD27186127B17A2A821532E619AECBD71DCEA7FE2AC15C50060F082A42724E136CC3E1A64A4538890A7A5C86D9B29563EC36A1B678A8DAC47E2C7E8BC4DB22CC4C25385EE9BCB2155458A1B3DB3A87B7AA13745DE0CC2BD89A2895CE3574E0B44D4B8CAC2E9662AB6A0057AC5DD670E90A36252F28BFB8085B551A08987854F9C7AD928C2BE4F9CBC9282E14A78659DEE472B9BB14AA234B11EE2A19B8805D5F4EBAEFB679BD997DF7E564F06EBD80062497CA17DE45426EAB0CB2439344E5F5ED27CDB67DE2DD9E05BBD4DDE93037765B9230DAA13691F60126BD6E99E1DA98C8E34B63DD4E79EC8704BD24A86E4B8A01846F5F69A71DF048CFE2B5F34CD2CE4E5D660792F16588364F076D413A37E99F97DCB3B4F3D92D96F54154DE519A5FA22C786840CC31CC18AD29336A5DA7380EEF2DBA4C8FF65598DB551FF1D07C2FF72ED23CB8F7D6392E5EE3790EE287E9E4672FDCE22AEFA315F2AFE2EB6DBED9E678C8285A8514310BABB00AFF2EC735DDE7F9F5EED9B8CCC5107037F1C69FA3EBF8DD3608FDBADF1F0437C024200A73737565AD98CBBCB8BAF6F05C43FA94C4404015F96A2BF967146D420C2CBB8E975E2163CDFBF625433FA1076FFDBC7F5D580E443F1134D9E797C1EE467256C168DAE39F9887FDE8E987FF0329B46D7A2EF70000 , N'6.2.0-61023')

